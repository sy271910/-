<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Document</title>
    <style>
    body,html{
        padding: 0;
        margin: 0;
    }
    #canvas{
        background: #ccc;
    }
    </style>
</head>
<body>
    <canvas id="canvas" width="600" height="600"></canvas>
</body>
</html>
<script>
    var canvas=document.getElementById('canvas');
    var cobj=canvas.getContext('2d');
    /*画5个圆*/
    var arcArr=[];
    for (var i = 0; i < 5; i++) {
        var arcobj={
            x:(i+1)*70,
            y:(i+1)*70,
            r:(i+1)*15,
            startA:0,
            lastA:Math.PI*2
        };
        arcArr.push(arcobj)
    }
    function drawArc(){
        for (var i = 0; i < arcArr.length; i++) {
            cobj.beginPath();
            cobj.arc(arcArr[i].x,arcArr[i].y,arcArr[i].r,arcArr[i].startA,arcArr[i].lastA);
            cobj.fill();
        }
    }
    drawArc();
    /*实现拖拽*/
    canvas.onmousedown=function(e){
        var ox=e.offsetX;
        var oy=e.offsetY;
        canvas.onmousemove=function(e){
            cobj.clearRect(0,0,600,600);
            var ox=e.offsetX;
            var oy=e.offsetY;
            for(var i=0;i<arcArr.length;i++){
                var event1=new addEvent(cobj,'arc',arcArr[i].x+','+arcArr[i].y+','+arcArr[i].r+','+arcArr[i].startA+','+arcArr[i].lastA,function(){
                        cobj.beginPath();
                        cobj.arc(ox,oy,arcArr[i].r,arcArr[i].startA,arcArr[i].lastA);
                        cobj.fill();
                        arcArr[i].x=ox;
                        arcArr[i].y=oy;
                    });
                event1.add(ox,oy);
            }
        };
        canvas.onmouseup=function(){
            canvas.onmousemove=null;
            canvas.onmouseup=null;
        }
    };
    /*添加事件对象，操作画布每一个元素*/
    function addEvent(cobj,type,data,callback){
        this.cobj=cobj;
        this.type=type;
        this.data=data;
        this.callback=callback;
        this.draw();
    }
    addEvent.prototype={
        draw:function(){
            if (this.type=='arc') {
                this.cobj.beginPath();
                var arr=this.data.split(',');
                this.cobj.arc(arr[0],arr[1],arr[2],arr[3],arr[4]);
                this.cobj.fill();
            }
            if (this.type=='rect') {
                this.cobj.beginPath();
                var arr=this.data.split(',');
                this.cobj.rect(arr[0],arr[1],arr[2],arr[3]);
                this.cobj.fill();
            }
        },
        add:function(cx,cy){
            /*判断操作范围*/
            if (this.cobj.isPointInPath(cx,cy)) {
                this.callback()
            }
        }
    }
</script>