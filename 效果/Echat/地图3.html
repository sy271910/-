<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
    <script src="js/echarts.js"></script>
    <script src="js/china.js"></script>
</head>
<body>
<div id="main" style="width:600px;height:600px"></div>
</body>
<script>
    var myChart = echarts.init(document.getElementById('main'));
    function randomData() {
        return Math.round(Math.random() * 100);
    }
    var data = [
        {
            name:"北京市"
        },
        {
            name:"上海市"
        },
        {
            name:"广州市"
        },
        {
            name:"成都市"
        },
        {
            name:"深圳市"
        },
        {
            name:"武汉市"
        },
        {
            name:"重庆市"
        },
        {
            name:"杭州市"
        },
        {
            name:"南京市"
        },
        {
            name:"西安市"
        }
    ];
    var geoCoordMap = {
        '北京市': [116.348014,39.95638],
        '上海市': [121.425668,31.322293],
        '广州市': [113.183679,23.244872],
        '成都市': [104.021825,30.656587],
        '深圳市': [114.028332,22.583433],
        '武汉市': [114.250722,30.688394],
        '重庆市': [106.487063,29.697505],
        '杭州市': [120.137857,30.369854],
        '南京市': [118.739662,32.202549],
        '西安市': [108.878711,34.487641]
    };
    var dataFrom = '北京市';
    myChart.setOption({
        series: [{
            type: 'map',
            map: 'china'
        }]
    });
    var convertData = function(data) {
        var res = [];
        for (var i = 0; i < data.length; i++) {
            var geoCoord = geoCoordMap[data[i].name];
            if (geoCoord) {
                res.push({
                    name: data[i].name,
                    value: geoCoord.concat(data[i].value)
                });
            }
        }
        return res;
    };
    option = {
        tooltip: {
            trigger: 'item'
        },
        visualMap: {
            min: 0,
            max: 100,
            left: 'left',
            top: 'bottom',
            text: ['高', '低'],
            calculable: true,
            inRange: {
                color: ['#ffffff', '#E0DAFF', '#ADBFFF', '#9CB4FF', '#6A9DFF', '#3889FF']
            }
        },
        geo: {
            map: 'china',
            zoom: 1.2,
            label: {
                normal: {

                    show: true,
                    color: '#c1c4c8'
                },
                emphasis: {
                    show: false,
                    color: '#292929'
                }
            },
            roam: true,
            itemStyle: {
                normal: {
                    areaColor: '#fbfbfb',
                    borderColor: '#b9b4b7'

                },
                emphasis: {
                    areaColor: '#05ff09'
                }
            }
        },
        series: [
            {
                name: '北京市',
                type: 'lines',
                zlevel: 2,
                symbolSize: 10,
                effect: {//线特效的配置
                    show: true,
                    period: 6,
                    symbol: 'image://img/1.jpg',
                    trailLength: 0,
                    symbolSize: 15
                },
                lineStyle: {
                    normal: {
                        color: '#c60fff',
                        width: 2,
                        opacity: 0.5,
                        curveness: 0.2
                    }
                },
                data: data.map(function(dataItem) {
                    return {
                        fromName: dataFrom,
                        toName: dataItem.name,
                        coords: [
                            geoCoordMap[dataFrom],
                            geoCoordMap[dataItem.name]
                        ]
                    }
                })
            },
            {
                type: 'effectScatter',
                coordinateSystem: 'geo',
                data: convertData(data),
                symbolSize: 8,
                showEffectOn: 'render',
                rippleEffect: {
                    scale: 5,
                    brushType: 'stroke'
                },
                hoverAnimation: true,
                label: {
                    normal: {
                        formatter: '{b}',
                        position: 'right',
                        show: true
                    },
                    emphasis: {
                        show: true
                    }
                },
                itemStyle: {
                    normal: {
                        color: '#c60fff',
                        shadowBlur: 20,
                        shadowColor: '#333'
                    }
                }
            },
            {
                type: 'map',
                mapType: 'china',
                geoIndex: 0,
                label: {
                    normal: {
                        show: true
                    },
                    emphasis: {
                        show: true
                    }
                },
                data: [
                    {
                        name: '天津',
                        value: randomData()
                    },
                    {
                        name: '河北',
                        value: randomData()
                    },
                    {
                        name: '河南',
                        value: randomData()
                    },
                    {
                        name: '云南',
                        value: randomData()
                    },
                    {
                        name: '辽宁',
                        value: randomData()
                    },
                    {
                        name: '黑龙江',
                        value: randomData()
                    },
                    {
                        name: '湖南',
                        value: randomData()
                    },
                    {
                        name: '安徽',
                        value: randomData()
                    },
                    {
                        name: '山东',
                        value: randomData()
                    },
                    {
                        name: '新疆',
                        value: randomData()
                    },
                    {
                        name: '江苏',
                        value: randomData()
                    },
                    {
                        name: '浙江',
                        value: randomData()
                    },
                    {
                        name: '江西',
                        value: randomData()
                    },
                    {
                        name: '湖北',
                        value: randomData()
                    },
                    {
                        name: '广西',
                        value: randomData()
                    },
                    {
                        name: '甘肃',
                        value: randomData()
                    },
                    {
                        name: '山西',
                        value: randomData()
                    },
                    {
                        name: '内蒙古',
                        value: randomData()
                    },
                    {
                        name: '陕西',
                        value: randomData()
                    },
                    {
                        name: '吉林',
                        value: randomData()
                    },
                    {
                        name: '福建',
                        value: randomData()
                    },
                    {
                        name: '贵州',
                        value: randomData()
                    },
                    {
                        name: '广东',
                        value: randomData()
                    },
                    {
                        name: '青海',
                        value: randomData()
                    },
                    {
                        name: '西藏',
                        value: randomData()
                    },
                    {
                        name: '四川',
                        value: randomData()
                    },
                    {
                        name: '宁夏',
                        value: randomData()
                    },
                    {
                        name: '海南',
                        value: randomData()
                    },
                    {
                        name: '台湾',
                        value: randomData()
                    },
                    {
                        name: '香港',
                        value: randomData()
                    },
                    {
                        name: '澳门',
                        value: randomData()
                    },
                    {
                        name: '北京',
                        value: randomData()
                    },
                    {
                        name: '上海',
                        value: randomData()
                    },
                    {
                        name: '广州',
                        value: randomData()
                    },
                    {
                        name: '深圳',
                        value: randomData()
                    },
                    {
                        name: '西安',
                        value: randomData()
                    },
                    {
                        name: '南京',
                        value: randomData()
                    },
                    {
                        name: '重庆',
                        value: randomData()
                    },
                    {
                        name: '成都',
                        value: randomData()
                    },
                    {
                        name: '杭州',
                        value: randomData()
                    },
                    {
                        name: '武汉',
                        value: randomData()
                    }
                ]
            }
        ]
    };
    myChart.setOption(option);
</script>
</html>
