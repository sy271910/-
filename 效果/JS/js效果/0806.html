<!DOCTYPE html>
<html>
<head lang="en">
    <meta charset="UTF-8">
    <title></title>
    <script src="js/function.js"></script>
    <script src="js/animate.js"></script>
</head>
<style>
    body{
        margin: 0;
        padding:0;
    }
    .bigbox{
        width: 200px;
        height:200px;
        position: relative;
        margin:10px 0 0 10px;
        float:left;
    }
    .box{
        width: 200px;
        height: 200px;
        position: relative;
    }
    .box>img{
        width: 100%;
        height: 100%;
    }
    .mask{
        width:50px;
        height:50px;
        background: rgba(0,0,0,.6);
        position: absolute;
        top: 0;
        left:0;
        display: none;
    }
    .copy{
        width: 200px;
        height:200px;
        position: absolute;
        top:0;
        left:0;
        cursor: crosshair;
    }
    .show{
        width: 200px;
        height: 200px;
        position: absolute;
        left:200px;
        top:0;
        border:1px solid #00cccc;
        display: none;
        overflow: hidden;

    }
    .show>img{
        position: absolute;
        left:0;
        top:0;
        width: 800px;
        height: 800px;
    }
</style>
<body>
<div class="bigbox">
    <div class="box">
        <img src="img/sj.jpg" alt="">
        <div class="mask"></div>
    </div>
    <div class="copy"></div>
    <div class="show"></div>
</div>
</body>
<script>
    var box=getClass("box")[0];
    var num=0;
    var copy=getClass("copy")[0];
    var mask=getClass("mask")[0];
    var show=getClass("show")[0];
    var Img;
    copy.onclick= function () {
        if(num==0) {
            box.style.display="none";
            var aa = document.createElement("div");
            aa.style.cssText="width:100%;height:100%;background-color:rgba(134,187,244,0.5);" +
                    "position:absolute;left:0;right:0;top:0;bottom:0;margin:auto;";
            var div = document.createElement("div");
            div.style.cssText = "width: 240px;height:320px;position: absolute;margin:auto;" +
                    "left:0;right:0;top:0;bottom:0;z-index: 999;";
            var img1 = document.createElement("img");
            img1.src = "img/s1.jpg";
            img1.style.width = "100%";
            img1.style.height = "100%";
            var close=document.createElement("img");
            close.style.width="20px";
            close.style.height="20px";
            close.src="img/s2.png";
            close.style.position="absolute";
            close.style.right="2%";
            close.style.top="0px";
            close.style.cursor="pointer";
            document.body.appendChild(aa);
            aa.appendChild(div);
            div.appendChild(img1);
            aa.appendChild(close);
            close.onclick = function () {
                document.body.removeChild(aa);
                box.style.display="block";
                num=0;
            };
            var speed = 10;
            mouseWheel(div, function () {
                var sw = div.offsetWidth;
                var sh = div.offsetHeight;
                var newWidth = sw + speed;
                var newHeight = sh + speed;
                if (newWidth >= 480 && newHeight >= 640) {
                    newHeight = 640;
                    newWidth = 480;
                }
                div.style.width = newWidth + "px";
                div.style.height = newHeight + "px";
            }, function () {
                var sw = div.offsetWidth;
                var sh = div.offsetHeight;
                var newWidth = sw - speed;
                var newHeight = sh - speed;
                if (newWidth <= 240 && newHeight <= 320) {
                    newHeight = 320;
                    newWidth = 240;
                }
                div.style.width = newWidth + "px";
                div.style.height = newHeight + "px";
            })
         }
        num++;
    };
    copy.onmouseover=function(){
        mask.style.display="block";
        show.style.display="block";
        Img=document.createElement("img");
        Img.src="img/sj.jpg";
        show.appendChild(Img);
    };
    copy.onmouseout=function(){
        mask.style.display="none";
        show.style.display="none";
        show.removeChild(Img);
    };
    copy.onmousemove=function(e){
        var ev=e||window.event;
        var ox=ev.offsetX;
        var oy=ev.offsetY;
        var left=ox-mask.offsetWidth/2;
        var top=oy-mask.offsetHeight/2;
        if(left>box.offsetWidth-mask.offsetWidth){
            left=box.offsetWidth-mask.offsetWidth;
        }
        if(top>box.offsetHeight-mask.offsetHeight){
            top=box.offsetHeight-mask.offsetHeight;
        }
        if(left<0){
            left=0;
        }
        if(top<0){
            top=0;
        }
        mask.style.left=left+"px";
        mask.style.top=top+"px";
        Img.style.left=-left*4+"px";
        Img.style.top=-top*4+"px";
    }
</script>
</html>
