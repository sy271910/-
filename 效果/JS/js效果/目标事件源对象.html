<!DOCTYPE html>
<html>
<head lang="en">
    <meta charset="UTF-8">
    <title></title>
    <script src="js/function.js"></script>
</head>
<style>
    body{
        margin: 0;
    }
    table{
        border: 1px solid #aaa;
        width: 600px;
        text-align: center;
    }
    th,td{
        border: 1px solid #aaa;
        width: 20%;
    }
</style>
<body>
<center>
    <table cellpadding="10px" cellspacing="0px" id="tab">
        <caption><h3>学生信息表</h3></caption>
        <tr>
            <th>姓名</th>
            <th>性别</th>
            <th>班级</th>
            <th>科目</th>
            <th>成绩</th>
        </tr>
        <tr>
            <td>张三</td>
            <td>男</td>
            <td>1602</td>
            <td>数学</td>
            <td>98</td>
        </tr>
    </table>
</center>
</body>
<script>
    var tab=document.getElementById("tab");
    tab.ondblclick= function (e) {
        var ev=e||window.event;
        var tdObj=ev.srcElement||ev.target;//获取目标事件源
        if(tdObj.nodeName=="TH"||tdObj.nodeName=="CAPTION"||tdObj.nodeName=="H3"){
            return;
        }
        var tdtext=tdObj.innerHTML;//保存td里原始内容
        tdObj.innerHTML="";//清空td里的内容
        var inputs=document.createElement("input");//创建input标签
        inputs.type="text";//类型为text,目的为输入新的内容
        inputs.style.cssText="width:100%;height:100%;text-align:center";
        inputs.value=tdtext;//input的value值为td的原始内容
        tdObj.appendChild(inputs);//将input标签插入到目标事件源中
        inputs.focus();//input获取焦点事件
        //input失去焦点事件，通过回车，单击事件来失去焦点
        inputs.onblur=inputs.onkeydown=inputs.onclick=function(e){
            var ev=e||window.event;//获取事件对象
            if(ev.type=="blur"||ev.type=="click"||(ev.type=="keydown"&&ev.keyCode==13)){//判断事件类型为哪种
                tdObj.removeChild(inputs);//目标事件源移除input标签
                var val=this.value;//获取到input标签的value值
                if(val==""){//进行对value值的判断，如果值为空
                    tdObj.innerHTML=tdtext;//td内容恢复原始值
                }else{//如果value不为空
                    tdObj.innerHTML=val;//td内容为当前input的value值

                }
            }
        }
    }
</script>
</html>
