<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <title id="title"></title>
    <script src="https://code.jquery.com/jquery-3.1.1.min.js"></script>
</head>
<body>
<button class="click">点击</button>
</body>
<script>
    $('.click').click(function () {
        alert(1)
    })
    //移除方法
    $('.click').unbind()

    //class 继承
    class Student {
        constructor(name) {
            this.name = name;
        }

        hello() {
            alert('Hello,' + this.name + '!');
        }
    }

    let xiaoming = new Student('小明')
    xiaoming.hello()

    class PrimaryStudent extends Student {//extends   继承Student的所有方法
        constructor(name, grade) {
            super(name);//创建子类的this对象
            this.grade = grade;
        }

        myGrade() {
            alert('I am at grade ' + this.grade);
        }
    }

    //继承了谁?
    console.log(Object.getPrototypeOf(PrimaryStudent))
    //实类化
    let jay = new PrimaryStudent('jay', '100')
    jay.hello()

    let arr = [1, 2, 3, 4]
    arr.forEach((item, index) => {
        console.log(item)
        console.log(index)
    })

    //解构赋值
    const [a, b, c, d, e] = 'hello';
    console.log(a);

    function move({x = 0, y = 0} = {}) {
        return [x, y];
    }

    move({x: 3, y: 8}); // [3, 8]
    move({x: 3}); // [3, 0]
    move(); // [0, 0]

    //map
    const map = new Map();
    map.set('first', 'hello');
    map.set('second', 'world');

    for (let [key, value] of map) {
        console.log(key + " is " + value);
    }

    //promise
    //做饭
    function cook() {
        console.log('开始做饭。');
        var p = new Promise(function (resolve, reject) {        //做一些异步操作
            setTimeout(function () {
                console.log('做饭完毕！');
                resolve('鸡蛋炒饭');
            }, 1000);
        });
        return p;
    }

    //吃饭
    function eat(data) {
        console.log('开始吃饭：' + data);
        var p = new Promise(function (resolve, reject) {
            setTimeout(function () {
                console.log('吃饭完毕!');
                resolve('一块碗和一双筷子');
            }, 2000);
        });
        return p;
    }

    function wash(data) {
        console.log('开始洗碗：' + data);
        var p = new Promise(function (resolve, reject) {
            setTimeout(function () {
                console.log('洗碗完毕!');
                // resolve('干净的碗筷');
                reject('闹肚子了')
            }, 2000);
        });
        return p;
    }

    cook()
        .then((data) => {
            return eat(data);
        })
        .then((data) => {
            return wash(data);
        })
        .catch((data) => {
            console.log(data);
        });

    //generator函数
    function* gen() {
        yield  123 + 456;
    }

    var gen = gen();
    console.log(gen.next());

    //indexOf
    let a1 = 'abcd';
    let a2 = [1, 2, 3];
    console.log(a2.lastIndexOf(3)) //2
    console.log(a1.indexOf('a'))  //0
    //includes
    console.log(['a', 'b', 'c', 'd'].includes('b'))       // true
    console.log(['a', 'b', 'c', 'd'].includes('b', 1))    // true
    console.log(['a', 'b', 'c', 'd'].includes('b', 2))    // false

    //filter
    let arr1 = [1, 2, 3], arr2 = [3, 5, 2]
    let aSet = new Set(arr1), bSet = new Set(arr2);
    // 并集
    let unionSet = new Set([...arr1, ...arr2])
    // 交集
    let intersectionSet = new Set([...aSet].filter(x => bSet.has(x)))
    let intersection = arr1.filter((x) => {
        return arr2.indexOf(x) > -1
    })
    console.log(unionSet) // {1,2,3,5}
    console.log(intersectionSet) // {2.3}
    console.log(intersection)    // [2.3]

    //async await
    function doubleAfter2seconds(num) {
        return new Promise((resolve, reject) => {
            setTimeout(() => {
                resolve(2 * num)
            }, 2000);
        })
    }

    async function testResult() {
        let first = await doubleAfter2seconds(30);
        let second = await doubleAfter2seconds(50);
        let third = await doubleAfter2seconds(30);
        console.log(first + second + third);
    }

    testResult();

    //node接口调用
    $.ajax({
        type: 'get',
        url: 'http://localhost:3002/api',
        success: function (data) {
            console.log(data)
        },
        error: function (err) {
            console.log(err)
        }
    });
</script>
</html>
