<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <title id="title">ES</title>
    <script src="https://code.jquery.com/jquery-3.1.1.min.js"></script>
</head>
<body>

</body>
<script>
    //class 继承
    class Student {
        constructor(name) {
            this.name = name;
        }

        hello() {
            alert('Hello,' + this.name + '!');
        }
    }

    let xiaoming = new Student('小明')
    xiaoming.hello()

    class PrimaryStudent extends Student {//extends   继承Student的所有方法
        constructor(name, grade) {
            //用在构造函数中，必须在this之前调用
            //通过super(name)来调用父类的构造函数，否则父类的name属性无法正常初始化
            //相当于PrimaryStudent.call(this,name)
            super(name);
            this.grade = grade;
        }

        myGrade() {
            alert('I am at grade ' + this.grade);
        }
    }

    //继承了谁?
    console.log(Object.getPrototypeOf(PrimaryStudent))
    //实类化
    let jay = new PrimaryStudent('jay', '100')
    jay.hello()

    let arr = [1, 2, 3, 4]
    arr.forEach((item, index) => {
        console.log(item)
        console.log(index)
    })

    //解构赋值
    const [a, b, c, d, e] = 'hello';
    console.log(a);

    function move({x = 0, y = 0} = {}) {
        return [x, y];
    }

    move({x: 3, y: 8}); // [3, 8]
    move({x: 3}); // [3, 0]
    move(); // [0, 0]

    //map
    const map = new Map();
    map.set('first', 'hello');
    map.set('second', 'world');

    for (let [key, value] of map) {
        console.log(key + " is " + value);
    }

    //promise
    //做饭
    function cook() {
        console.log('开始做饭。');
        var p = new Promise(function (resolve, reject) {
            setTimeout(function () {
                console.log('做饭完毕！');
                resolve('鸡蛋炒饭');
            }, 2000);
        });
        return p;
    }

    //吃饭
    function eat(data) {
        console.log('开始吃饭：' + data);
        var p = new Promise(function (resolve, reject) {
            setTimeout(function () {
                console.log('吃饭完毕!');
                resolve('一块碗和一双筷子');
            }, 2000);
        });
        return p;
    }

    function wash(data) {
        console.log('开始洗碗：' + data);
        var p = new Promise(function (resolve, reject) {
            setTimeout(function () {
                console.log('洗碗完毕!');
                // resolve('干净的碗筷');
                reject('闹肚子了')
            }, 2000);
        });
        return p;
    }

    cook()
        .then((data) => {
            return eat(data);
        })
        .then((data) => {
            return wash(data);
        })
        .catch((data) => {
            console.log(data);
        });

    //indexOf
    let a1 = 'abcd';
    let a2 = [1, 2, 3];
    console.log(a2.lastIndexOf(3)) //2
    console.log(a1.indexOf('a'))  //0
    //includes
    console.log(['a', 'b', 'c', 'd'].includes('b'))       // true
    console.log(['a', 'b', 'c', 'd'].includes('b', 1))    // true
    console.log(['a', 'b', 'c', 'd'].includes('b', 2))    // false

    //filter
    let arr1 = [1, 2, 3], arr2 = [3, 5, 2]
    // 并集
    let union = Array.from(new Set([...arr1, ...arr2]))
    // 交集
    let intersection = arr1.filter((x) => {
        return arr2.indexOf(x) > -1
    })
    // 差集
    let difference = arr1.concat(arr2).filter(v => !arr1.includes(v) || !arr2.includes(v))
    console.log(union)        // [1,2,3,5]
    console.log(intersection)    // [2,3]
    console.log(difference)      // [1,5]

    //node接口调用
    $.ajax({
        type: 'get',
        url: 'http://localhost:3002/api',
        success: function (data) {
            console.log(data)
        },
        error: function (err) {
            console.log(err)
        }
    });
</script>
</html>
